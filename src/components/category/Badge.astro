---
import { Icon } from 'astro-icon/components';
import type { HTMLAttributes } from 'astro/types';
import type { CollectionEntry } from 'astro:content';
import { cva, type VariantProps } from 'class-variance-authority';

export interface Props extends HTMLAttributes<'a'>, VariantProps<typeof span> {
  category: CollectionEntry<'category'>;
}

//  font-medium
const badgeCVA = cva('rounded-md font-semibold capitalize shadow-md', {
  variants: {
    intent: {
      primary: [
        'bg-teal-700',
        'text-white',
        'hover:bg-teal-800',
        'active:bg-teal-900',
        'focus-visible:outline',
        'focus-visible:outline-2',
        'focus-visible:outline-offset-2',
        'focus-visible:outline-teal-700',
      ],
      secondary: [
        'bg-white',
        'text-gray-900',
        'ring-1',
        'ring-inset',
        'ring-gray-300',
        'hover:bg-gray-50',
        'active:bg-gray-100',
      ],
    },
    size: {
      xs: ['text-xs', 'py-0.5', 'px-2', 'me-2'],
      sm: ['text-sm', 'py-0.5', 'px-2', 'me-2'],
      md: ['text-sm', 'py-1', 'px-3', 'me-2'],
      // text-md?
      lg: ['text-md', 'py-1', 'px-3', 'me-2'],
      xl: ['text-md', 'py-1', 'px-3', 'me-2'],
    },
    _content: {
      text: '',
      textAndIcon: 'inline-flex items-center',
      icon: '',
    },
  },
});

// const { category } = Astro.props;

const {
  category,
  intent = 'primary',
  size = 'md',
  _content = 'text',
  ...attrs
} = Astro.props;

// const color = switch(category) {cva
//   case "announcements":
// }

// <span class="bg-gray-100 text-gray-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded">Dark</span>
// <span class="bg-red-100 text-red-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded">Red</span>
// <span class="bg-green-100 text-green-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded">Green</span>
// <span class="bg-yellow-100 text-yellow-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded">Yellow</span>
// <span class="bg-indigo-100 text-indigo-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded">Indigo</span>
// <span class="bg-purple-100 text-purple-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded">Purple</span>
// <span class="bg-pink-100 text-pink-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded">Pink</span>

const bgColor = 'bg-blue-100';
const textColor = 'text-blue-800';
---

<span class={badgeCVA({ intent, size, _content })} {...attrs}>
  <Icon name={category.data.icon} />&nbsp;
  {category.data.name}</span
>
